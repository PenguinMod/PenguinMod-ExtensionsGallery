(function (Scratch) {
    'use strict';
    let indentlayer = 1
    let loops = 0
    let script = []
    let ctype = ""
    let vars = {}
    if (!Scratch.extensions.unsandboxed) {
        throw new Error('This example must run unsandboxed');
    }
    const operatorsvg = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NC4xIiBoZWlnaHQ9IjY0LjI0MDgyIiB2aWV3Qm94PSIwLDAsNjQuMSw2NC4yNDA4MiI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIwNy45NSwtMTQ5LjU1KSI+PGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMTIuNTgxODEsMTU4Ljk4NDc0YzAsLTIuMjA5MTQgMS43OTA4NiwtNCA0LC00aDQ2LjgzNjM5YzIuMjA5MTQsMCA0LDEuNzkwODYgNCw0djQxLjU1NjA4YzAsMi4yMDkxNCAtMS43OTA4Niw0IC00LDRoLTUuMjU2OTdjLTIsMCAtMywxIC00LDJsLTQsNGMtMSwxIC0yLDIgLTQsMmgtMTJjLTIsMCAtMywtMSAtNCwtMmwtNCwtNGMtMSwtMSAtMiwtMiAtNCwtMmgtNS41Nzk0MmMtMi4yMDkxNCwwIC00LC0xLjc5MDg2IC00LC00eiIgZmlsbD0iIzM4OTQzOCIgc3Ryb2tlPSIjMzg5NDM4IiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjEyLjU4MTgxLDE1NS4yMjE5NmMwLC0yLjIwOTE0IDEuNzkwODYsLTQgNCwtNGg0Ni44MzYzOWMyLjIwOTE0LDAgNCwxLjc5MDg2IDQsNHY0MS41NTYwOGMwLDIuMjA5MTQgLTEuNzkwODYsNCAtNCw0aC01LjI1Njk3Yy0yLDAgLTMsMSAtNCwybC00LDRjLTEsMSAtMiwyIC00LDJoLTEyYy0yLDAgLTMsLTEgLTQsLTJsLTQsLTRjLTEsLTEgLTIsLTIgLTQsLTJoLTUuNTc5NDJjLTIuMjA5MTQsMCAtNCwtMS43OTA4NiAtNCwtNHoiIGZpbGw9IiM1OWMwNTkiIHN0cm9rZT0iIzZmZjI2ZiIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTIyNC4xNDE5NSwxNjUuMzcwODZjMCwtMS4zNzY1NyAxLjAwNzksLTIuNDkyNSAyLjI1MTIxLC0yLjQ5MjVoMjYuMzU5NjdjMS4yNDMzMSwwIDIuMjUxMjIsMS4xMTU5MyAyLjI1MTIyLDIuNDkyNXYyNS44OTQ2NGMwLDEuMzc2NTcgLTEuMDA3OSwyLjQ5MjQ5IC0yLjI1MTIyLDIuNDkyNDloLTI2LjM1OTY3Yy0xLjI0MzMxLDAgLTIuMjUxMjEsLTEuMTE1OTMgLTIuMjUxMjEsLTIuNDkyNDl6IiBmaWxsPSIjMjE0NzIxIiBzdHJva2U9IiMyMTQ3MjEiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMjAuMTk5OSwxNzEuODQ1MzJoMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjE0NzIxIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yMjAuMTk5OSwxODQuNzkxMDhoMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjE0NzIxIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNTkuMTEwMDEsMTcxLjg0NTMyaC0xMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMTQ3MjEiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTI1OS4xMTAwMSwxODQuNzkxMDhoLTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIxNDcyMSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjMzLjE4MjA2LDE5Ny43NzMyNHYtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjE0NzIxIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNDYuMTI3ODcsMTg2LjQ1NjUzdjExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIxNDcyMSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjMzLjE4MjA2LDE3MC4xNzk4NXYtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjE0NzIxIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNDYuMTI3ODcsMTcwLjE3OTg1di0xMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMTQ3MjEiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTIyOS45MDA2NSwxODQuODUxNTljLTEuMjE0NjIsMCAtMi4yNDczLC0wLjI2MDk1IC0zLjA5ODA1LC0wLjc4Mjg1Yy0wLjg0ODEzLC0wLjUyNDkzIC0xLjQ5MzQsLTEuMjU5MjQgLTEuOTM1NzksLTIuMjAyOTFjLTAuNDQyMzksLTAuOTQzNjcgLTAuNjYzNTgsLTIuMDQ1MTMgLTAuNjYzNTgsLTMuMzA0MzZjMCwtMC45ODAwOCAwLjEzMjE5LC0xLjg2MzA3IDAuMzk2NTgsLTIuNjQ4OTVjMC4yNjcwMSwtMC43ODU4OCAwLjY1MTgxLC0xLjQ2MTAyIDEuMTU0NDEsLTIuMDI1NGMwLjUwMjYsLTAuNTY3NDEgMS4xMTc3NiwtMC45OTgyOSAxLjg0NTQ4LC0xLjI5MjYxYzAuNzMwMzQsLTAuMjk3MzYgMS41NTc1MywtMC40NDYwNCAyLjQ4MTU4LC0wLjQ0NjA0YzAuNTAyNiwwIDEuMDE1NjcsMC4wNTYxNCAxLjUzOTIxLDAuMTY4NGMwLjUyMzU0LDAuMTA5MjMgMS4wMzY2MSwwLjMxNDA1IDEuNTM5MjEsMC42MTQ0NWMwLjI1OTE1LDAuMTM5NTggMC40MzU4NSwwLjMzNTI5IDAuNTMwMDksMC41ODcxNGMwLjA5Njg2LDAuMjUxODUgMC4xMjgyNywwLjUxNDMxIDAuMDk0MjQsMC43ODc0Yy0wLjAzNDAzLDAuMjczMDkgLTAuMTE5MTEsMC41MjM0MiAtMC4yNTUyMiwwLjc1MDk5Yy0wLjEzNjEyLDAuMjI3NTcgLTAuMzIwNjcsMC4zNzkyOSAtMC41NTM2NCwwLjQ1NTE0Yy0wLjIzMDM2LDAuMDc1ODYgLTAuNDkwODIsMC4wMzc5MyAtMC43ODEzOCwtMC4xMTM3OWMtMC4zMDEwMywtMC4xNjM4NSAtMC42MjgyNSwtMC4yODk3NyAtMC45ODE2NCwtMC4zNzc3N2MtMC4zNTA3NywtMC4wODggLTAuNzIyNDksLTAuMTMxOTkgLTEuMTE1MTQsLTAuMTMxOTljLTAuNjcyNzUsMCAtMS4yMzI5MywwLjE0MTA5IC0xLjY4MDU2LDAuNDIzMjhjLTAuNDQ3NjMsMC4yNzkxNiAtMC43ODI2OSwwLjY5MzM0IC0xLjAwNTIsMS4yNDI1NWMtMC4yMTk4OSwwLjU0NjE3IC0wLjMyOTgzLDEuMjE1MjQgLTAuMzI5ODMsMi4wMDcyYzAsMS4xODk0NSAwLjI1MTMsMi4wODc2MSAwLjc1MzksMi42OTQ0N2MwLjUwMjYsMC42MDM4MiAxLjI0NjAzLDAuOTA1NzQgMi4yMzAyOCwwLjkwNTc0YzAuMzAzNjUsMCAwLjYzMzQ4LC0wLjAzNDg5IDAuOTg5NDksLTAuMTA0NjhjMC4zNTYwMSwtMC4wNjk3OSAwLjcxNDYzLC0wLjE2ODQgMS4wNzU4OCwtMC4yOTU4NGwtMC41MTA0NSwxLjIwNjE0di0yLjk5MDMxaC0xLjA1NjI0Yy0wLjM0MDMsMCAtMC42MDQ2OSwtMC4wOTg2MSAtMC43OTMxNiwtMC4yOTU4NGMtMC4xODU4NiwtMC4yMDAyNiAtMC4yNzg3OCwtMC40ODA5NCAtMC4yNzg3OCwtMC44NDIwMmMwLC0wLjM2MTA4IDAuMDkyOTMsLTAuNjM3MiAwLjI3ODc4LC0wLjgyODM2YzAuMTg4NDcsLTAuMTkxMTYgMC40NTI4NiwtMC4yODY3NCAwLjc5MzE2LC0wLjI4Njc0aDIuMjMwMjhjMC4zNTMzOSwwIDAuNjIzMDEsMC4xMDc3MiAwLjgwODg3LDAuMzIzMTVjMC4xODU4NiwwLjIxNTQ0IDAuMjc4NzgsMC41MjY0NSAwLjI3ODc4LDAuOTMzMDV2My44NjQxOWMwLDAuMzQ4OTQgLTAuMDYyODIsMC42NDYzMSAtMC4xODg0NywwLjg5MjA4Yy0wLjEyNTY1LDAuMjQyNzQgLTAuMzI0NTksMC40MTcyMiAtMC41OTY4NCwwLjUyMzQyYy0wLjQ3MTE4LDAuMTg1MDkgLTAuOTg0MjYsMC4zMjkyMiAtMS41MzkyMSwwLjQzMjM5Yy0wLjU1MjM0LDAuMTA2MiAtMS4xMDQ2NywwLjE1OTMgLTEuNjU3LDAuMTU5M3pNMjM2LjUxMTYxLDE4NC44MTk3MWMtMC40NDIzOSwwIC0wLjc4NCwtMC4xNDI2MSAtMS4wMjQ4MywtMC40Mjc4NGMtMC4yNDA4MywtMC4yODgyNiAtMC4zNjEyNCwtMC42ODg3OSAtMC4zNjEyNCwtMS4yMDE1OHYtOS4yMjU4MmMwLC0wLjUyNDkzIDAuMTIzMDMsLTAuOTI2OTggMC4zNjkxLC0xLjIwNjE0YzAuMjQ2MDYsLTAuMjc5MTYgMC41OTAyOSwtMC40MTg3MyAxLjAzMjY4LC0wLjQxODczaDMuNzEwNTljMS4yMDQxNCwwIDIuMTM0NzMsMC4zNTgwNSAyLjc5MTc4LDEuMDc0MTRjMC42NTk2NiwwLjcxNjEgMC45ODk0OSwxLjcwMzc2IDAuOTg5NDksMi45NjNjMCwxLjI1OTI0IC0wLjMyOTgzLDIuMjQ2OTEgLTAuOTg5NDksMi45NjNjLTAuNjU3MDQsMC43MTYxIC0xLjU4NzYzLDEuMDc0MTQgLTIuNzkxNzgsMS4wNzQxNGgtMi4zNDAyMnYyLjc3NjM5YzAsMC41MTI4IC0wLjExNTE4LDAuOTEzMzIgLTAuMzQ1NTQsMS4yMDE1OGMtMC4yMzAzNiwwLjI4NTIyIC0wLjU3NzIsMC40Mjc4NCAtMS4wNDA1MywwLjQyNzg0ek0yMzcuODk3NjgsMTc3Ljk0NzAzaDEuODU3MjZjMC41MjA5MiwwIDAuOTIxNDMsLTAuMTMwNDcgMS4yMDE1MiwtMC4zOTE0MmMwLjI4MjcxLC0wLjI2MDk1IDAuNDI0MDcsLTAuNjUzODkgMC40MjQwNywtMS4xNzg4M2MwLC0wLjUzNzA3IC0wLjE0MTM1LC0wLjkzMzA1IC0wLjQyNDA3LC0xLjE4NzkzYy0wLjI4MDA5LC0wLjI1NzkxIC0wLjY4MDYsLTAuMzg2ODcgLTEuMjAxNTIsLTAuMzg2ODdoLTEuODU3MjZ6TTI0OS40MTAzOSwxODQuODUxNTljLTAuNzc0ODQsMCAtMS40NTkzNywtMC4xMTM3OSAtMi4wNTM1OSwtMC4zNDEzNmMtMC41OTE2LC0wLjIyNzU3IC0xLjA5MTU4LC0wLjU2NzQxIC0xLjQ5OTk0LC0xLjAxOTUzYy0wLjQwNTc1LC0wLjQ1NTE0IC0wLjcxMjAxLC0xLjAyMjU2IC0wLjkxODgxLC0xLjcwMjI1Yy0wLjIwNDE4LC0wLjY4MjcyIC0wLjMwNjI3LC0xLjQ3MzE2IC0wLjMwNjI3LC0yLjM3MTMxdi01LjYxMTk2YzAsLTAuNTM0MDQgMC4xMjA0MiwtMC45Mzc2IDAuMzYxMjQsLTEuMjEwNjljMC4yNDA4MywtMC4yNzYxMiAwLjU4MjQ0LC0wLjQxNDE4IDEuMDI0ODMsLTAuNDE0MThjMC40NTI4NiwwIDAuNzk3MDksMC4xMzgwNiAxLjAzMjY4LDAuNDE0MThjMC4yMzU1OSwwLjI3MzA5IDAuMzUzMzksMC42NzY2NSAwLjM1MzM5LDEuMjEwNjl2NS42NDgzN2MwLDAuODk1MTIgMC4xNzAxNSwxLjU3MDI1IDAuNTEwNDUsMi4wMjU0YzAuMzQyOTIsMC40NTUxNCAwLjg0MTU5LDAuNjgyNzIgMS40OTYwMiwwLjY4MjcyYzAuNjQzOTYsMCAxLjEzNjA4LC0wLjIyNzU3IDEuNDc2MzgsLTAuNjgyNzJjMC4zNDI5MiwtMC40NTUxNCAwLjUxNDM4LC0xLjEzMDI4IDAuNTE0MzgsLTIuMDI1NHYtNS42NDgzN2MwLC0wLjUzNDA0IDAuMTE3NzksLTAuOTM3NiAwLjM1MzM5LC0xLjIxMDY5YzAuMjM1NTksLTAuMjc2MTIgMC41NzQ1OSwtMC40MTQxOCAxLjAxNjk4LC0wLjQxNDE4YzAuNDQyMzksMCAwLjc3ODc2LDAuMTM4MDYgMS4wMDkxMiwwLjQxNDE4YzAuMjMyOTcsMC4yNzMwOSAwLjM0OTQ2LDAuNjc2NjUgMC4zNDk0NiwxLjIxMDY5djUuNjExOTZjMCwxLjIwMTU4IC0wLjE3OTMxLDIuMjA3NDYgLTAuNTM3OTQsMy4wMTc2MmMtMC4zNTYwMSwwLjgwNzEyIC0wLjg4NjA5LDEuNDEyNDcgLTEuNTkwMjUsMS44MTYwM2MtMC43MDE1NCwwLjQwMDUzIC0xLjU2NTM4LDAuNjAwNzkgLTIuNTkxNTMsMC42MDA3OXoiIGZpbGw9IiM1OWMwNTkiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIi8+PHBhdGggZD0iTTIwNy45NSwyMTMuNjUwMDF2LTY0LjFoNjQuMXY2NC4xeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6MzIuMDUwMDAwMDAwMDAwMDE6MzAuNDQ5OTk1LS0+"
    const varsvg = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NC4xIiBoZWlnaHQ9IjY0LjI0MDgiIHZpZXdCb3g9IjAsMCw2NC4xLDY0LjI0MDgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDcuOTUsLTE0OS41NTAwNSkiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMjA3Ljk1LDIxMy42NTAwNXYtNjQuMWg2NC4xdjY0LjF6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjEyLjU4MTgxLDE1OC45ODQ3N2MwLC0yLjIwOTE0IDEuNzkwODYsLTQgNCwtNGg0Ni44MzYzOWMyLjIwOTE0LDAgNCwxLjc5MDg2IDQsNHY0MS41NTYwOGMwLDIuMjA5MTQgLTEuNzkwODYsNCAtNCw0aC01LjI1Njk3Yy0yLDAgLTMsMSAtNCwybC00LDRjLTEsMSAtMiwyIC00LDJoLTEyYy0yLDAgLTMsLTEgLTQsLTJsLTQsLTRjLTEsLTEgLTIsLTIgLTQsLTJoLTUuNTc5NDJjLTIuMjA5MTQsMCAtNCwtMS43OTA4NiAtNCwtNHoiIGZpbGw9IiNkYjZlMDAiIHN0cm9rZT0iI2RiNmUwMCIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTIxMi41ODE4MSwxNTUuMjIxOTljMCwtMi4yMDkxNCAxLjc5MDg2LC00IDQsLTRoNDYuODM2MzljMi4yMDkxNCwwIDQsMS43OTA4NiA0LDR2NDEuNTU2MDhjMCwyLjIwOTE0IC0xLjc5MDg2LDQgLTQsNGgtNS4yNTY5N2MtMiwwIC0zLDEgLTQsMmwtNCw0Yy0xLDEgLTIsMiAtNCwyaC0xMmMtMiwwIC0zLC0xIC00LC0ybC00LC00Yy0xLC0xIC0yLC0yIC00LC0yaC01LjU3OTQyYy0yLjIwOTE0LDAgLTQsLTEuNzkwODYgLTQsLTR6IiBmaWxsPSIjZmY4YzFhIiBzdHJva2U9IiNmZmJhNzUiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMjQuMTQxOTUsMTY1LjM3MDg5YzAsLTEuMzc2NTcgMS4wMDc5LC0yLjQ5MjUgMi4yNTEyMSwtMi40OTI1aDI2LjM1OTY3YzEuMjQzMzEsMCAyLjI1MTIyLDEuMTE1OTMgMi4yNTEyMiwyLjQ5MjV2MjUuODk0NjRjMCwxLjM3NjU3IC0xLjAwNzksMi40OTI0OSAtMi4yNTEyMiwyLjQ5MjQ5aC0yNi4zNTk2N2MtMS4yNDMzMSwwIC0yLjI1MTIxLC0xLjExNTkzIC0yLjI1MTIxLC0yLjQ5MjQ5eiIgZmlsbD0iIzU5MzEwOSIgc3Ryb2tlPSIjNTkzMTA5IiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjIwLjE5OTksMTcxLjg0NTM1aDExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU5MzEwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjIwLjE5OTksMTg0Ljc5MTExaDExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU5MzEwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjU5LjExMDAxLDE3MS44NDUzNWgtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTkzMTA5IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNTkuMTEwMDEsMTg0Ljc5MTExaC0xMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiM1OTMxMDkiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTIzMy4xODIwNiwxOTcuNzczMjd2LTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU5MzEwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjQ2LjEyNzg3LDE5Ny43NzMyNnYtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTkzMTA5IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yMzMuMTgyMDYsMTcwLjE3OTg4di0xMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiM1OTMxMDkiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTI0Ni4xMjc4NywxNzAuMTc5ODh2LTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU5MzEwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjI5LjkwMDY1LDE4NC44NTE2MmMtMS4yMTQ2MiwwIC0yLjI0NzMsLTAuMjYwOTUgLTMuMDk4MDUsLTAuNzgyODVjLTAuODQ4MTMsLTAuNTI0OTMgLTEuNDkzNCwtMS4yNTkyNCAtMS45MzU3OSwtMi4yMDI5MWMtMC40NDIzOSwtMC45NDM2NyAtMC42NjM1OCwtMi4wNDUxMyAtMC42NjM1OCwtMy4zMDQzNmMwLC0wLjk4MDA4IDAuMTMyMTksLTEuODYzMDcgMC4zOTY1OCwtMi42NDg5NWMwLjI2NzAxLC0wLjc4NTg4IDAuNjUxODEsLTEuNDYxMDIgMS4xNTQ0MSwtMi4wMjU0YzAuNTAyNiwtMC41Njc0MSAxLjExNzc2LC0wLjk5ODI5IDEuODQ1NDgsLTEuMjkyNjFjMC43MzAzNCwtMC4yOTczNiAxLjU1NzUzLC0wLjQ0NjA0IDIuNDgxNTgsLTAuNDQ2MDRjMC41MDI2LDAgMS4wMTU2NywwLjA1NjE0IDEuNTM5MjEsMC4xNjg0YzAuNTIzNTQsMC4xMDkyMyAxLjAzNjYxLDAuMzE0MDUgMS41MzkyMSwwLjYxNDQ1YzAuMjU5MTUsMC4xMzk1OCAwLjQzNTg1LDAuMzM1MjkgMC41MzAwOSwwLjU4NzE0YzAuMDk2ODYsMC4yNTE4NSAwLjEyODI3LDAuNTE0MzEgMC4wOTQyNCwwLjc4NzRjLTAuMDM0MDMsMC4yNzMwOSAtMC4xMTkxMSwwLjUyMzQyIC0wLjI1NTIyLDAuNzUwOTljLTAuMTM2MTIsMC4yMjc1NyAtMC4zMjA2NywwLjM3OTI5IC0wLjU1MzY0LDAuNDU1MTRjLTAuMjMwMzYsMC4wNzU4NiAtMC40OTA4MiwwLjAzNzkzIC0wLjc4MTM4LC0wLjExMzc5Yy0wLjMwMTAzLC0wLjE2Mzg1IC0wLjYyODI1LC0wLjI4OTc3IC0wLjk4MTY0LC0wLjM3Nzc3Yy0wLjM1MDc3LC0wLjA4OCAtMC43MjI0OSwtMC4xMzE5OSAtMS4xMTUxNCwtMC4xMzE5OWMtMC42NzI3NSwwIC0xLjIzMjkzLDAuMTQxMDkgLTEuNjgwNTYsMC40MjMyOGMtMC40NDc2MywwLjI3OTE2IC0wLjc4MjY5LDAuNjkzMzQgLTEuMDA1MiwxLjI0MjU1Yy0wLjIxOTg5LDAuNTQ2MTcgLTAuMzI5ODMsMS4yMTUyNCAtMC4zMjk4MywyLjAwNzJjMCwxLjE4OTQ1IDAuMjUxMywyLjA4NzYxIDAuNzUzOSwyLjY5NDQ3YzAuNTAyNiwwLjYwMzgyIDEuMjQ2MDMsMC45MDU3NCAyLjIzMDI4LDAuOTA1NzRjMC4zMDM2NSwwIDAuNjMzNDgsLTAuMDM0ODkgMC45ODk0OSwtMC4xMDQ2OGMwLjM1NjAxLC0wLjA2OTc5IDAuNzE0NjMsLTAuMTY4NCAxLjA3NTg4LC0wLjI5NTg0bC0wLjUxMDQ1LDEuMjA2MTR2LTIuOTkwMzFoLTEuMDU2MjRjLTAuMzQwMywwIC0wLjYwNDY5LC0wLjA5ODYxIC0wLjc5MzE2LC0wLjI5NTg0Yy0wLjE4NTg2LC0wLjIwMDI2IC0wLjI3ODc4LC0wLjQ4MDk0IC0wLjI3ODc4LC0wLjg0MjAyYzAsLTAuMzYxMDggMC4wOTI5MywtMC42MzcyIDAuMjc4NzgsLTAuODI4MzZjMC4xODg0NywtMC4xOTExNiAwLjQ1Mjg2LC0wLjI4Njc0IDAuNzkzMTYsLTAuMjg2NzRoMi4yMzAyOGMwLjM1MzM5LDAgMC42MjMwMSwwLjEwNzcyIDAuODA4ODcsMC4zMjMxNWMwLjE4NTg2LDAuMjE1NDQgMC4yNzg3OCwwLjUyNjQ1IDAuMjc4NzgsMC45MzMwNXYzLjg2NDE5YzAsMC4zNDg5NCAtMC4wNjI4MiwwLjY0NjMxIC0wLjE4ODQ3LDAuODkyMDhjLTAuMTI1NjUsMC4yNDI3NCAtMC4zMjQ1OSwwLjQxNzIyIC0wLjU5Njg0LDAuNTIzNDJjLTAuNDcxMTgsMC4xODUwOSAtMC45ODQyNiwwLjMyOTIyIC0xLjUzOTIxLDAuNDMyMzljLTAuNTUyMzQsMC4xMDYyIC0xLjEwNDY3LDAuMTU5MyAtMS42NTcsMC4xNTkzek0yMzYuNTExNjEsMTg0LjgxOTc0Yy0wLjQ0MjM5LDAgLTAuNzg0LC0wLjE0MjYxIC0xLjAyNDgzLC0wLjQyNzg0Yy0wLjI0MDgzLC0wLjI4ODI2IC0wLjM2MTI0LC0wLjY4ODc5IC0wLjM2MTI0LC0xLjIwMTU4di05LjIyNTgyYzAsLTAuNTI0OTMgMC4xMjMwMywtMC45MjY5OCAwLjM2OTEsLTEuMjA2MTRjMC4yNDYwNiwtMC4yNzkxNiAwLjU5MDI5LC0wLjQxODczIDEuMDMyNjgsLTAuNDE4NzNoMy43MTA1OWMxLjIwNDE0LDAgMi4xMzQ3MywwLjM1ODA1IDIuNzkxNzgsMS4wNzQxNGMwLjY1OTY2LDAuNzE2MSAwLjk4OTQ5LDEuNzAzNzYgMC45ODk0OSwyLjk2M2MwLDEuMjU5MjQgLTAuMzI5ODMsMi4yNDY5MSAtMC45ODk0OSwyLjk2M2MtMC42NTcwNCwwLjcxNjEgLTEuNTg3NjMsMS4wNzQxNCAtMi43OTE3OCwxLjA3NDE0aC0yLjM0MDIydjIuNzc2MzljMCwwLjUxMjggLTAuMTE1MTgsMC45MTMzMiAtMC4zNDU1NCwxLjIwMTU4Yy0wLjIzMDM2LDAuMjg1MjIgLTAuNTc3MiwwLjQyNzg0IC0xLjA0MDUzLDAuNDI3ODR6TTIzNy44OTc2OCwxNzcuOTQ3MDdoMS44NTcyNmMwLjUyMDkyLDAgMC45MjE0MywtMC4xMzA0NyAxLjIwMTUyLC0wLjM5MTQyYzAuMjgyNzEsLTAuMjYwOTUgMC40MjQwNywtMC42NTM4OSAwLjQyNDA3LC0xLjE3ODgzYzAsLTAuNTM3MDcgLTAuMTQxMzUsLTAuOTMzMDUgLTAuNDI0MDcsLTEuMTg3OTNjLTAuMjgwMDksLTAuMjU3OTEgLTAuNjgwNiwtMC4zODY4NyAtMS4yMDE1MiwtMC4zODY4N2gtMS44NTcyNnpNMjQ5LjQxMDM5LDE4NC44NTE2MmMtMC43NzQ4NCwwIC0xLjQ1OTM3LC0wLjExMzc5IC0yLjA1MzU5LC0wLjM0MTM2Yy0wLjU5MTYsLTAuMjI3NTcgLTEuMDkxNTgsLTAuNTY3NDEgLTEuNDk5OTQsLTEuMDE5NTNjLTAuNDA1NzUsLTAuNDU1MTQgLTAuNzEyMDEsLTEuMDIyNTYgLTAuOTE4ODEsLTEuNzAyMjVjLTAuMjA0MTgsLTAuNjgyNzIgLTAuMzA2MjcsLTEuNDczMTYgLTAuMzA2MjcsLTIuMzcxMzF2LTUuNjExOTZjMCwtMC41MzQwNCAwLjEyMDQyLC0wLjkzNzYgMC4zNjEyNCwtMS4yMTA2OWMwLjI0MDgzLC0wLjI3NjEyIDAuNTgyNDQsLTAuNDE0MTggMS4wMjQ4MywtMC40MTQxOGMwLjQ1Mjg2LDAgMC43OTcwOSwwLjEzODA2IDEuMDMyNjgsMC40MTQxOGMwLjIzNTU5LDAuMjczMDkgMC4zNTMzOSwwLjY3NjY1IDAuMzUzMzksMS4yMTA2OXY1LjY0ODM3YzAsMC44OTUxMiAwLjE3MDE1LDEuNTcwMjUgMC41MTA0NSwyLjAyNTRjMC4zNDI5MiwwLjQ1NTE0IDAuODQxNTksMC42ODI3MiAxLjQ5NjAyLDAuNjgyNzJjMC42NDM5NiwwIDEuMTM2MDgsLTAuMjI3NTcgMS40NzYzOCwtMC42ODI3MmMwLjM0MjkyLC0wLjQ1NTE0IDAuNTE0MzgsLTEuMTMwMjggMC41MTQzOCwtMi4wMjU0di01LjY0ODM3YzAsLTAuNTM0MDQgMC4xMTc3OSwtMC45Mzc2IDAuMzUzMzksLTEuMjEwNjljMC4yMzU1OSwtMC4yNzYxMiAwLjU3NDU5LC0wLjQxNDE4IDEuMDE2OTgsLTAuNDE0MThjMC40NDIzOSwwIDAuNzc4NzYsMC4xMzgwNiAxLjAwOTEyLDAuNDE0MThjMC4yMzI5NywwLjI3MzA5IDAuMzQ5NDYsMC42NzY2NSAwLjM0OTQ2LDEuMjEwNjl2NS42MTE5NmMwLDEuMjAxNTggLTAuMTc5MzEsMi4yMDc0NiAtMC41Mzc5NCwzLjAxNzYyYy0wLjM1NjAxLDAuODA3MTIgLTAuODg2MDksMS40MTI0NyAtMS41OTAyNSwxLjgxNjAzYy0wLjcwMTU0LDAuNDAwNTMgLTEuNTY1MzgsMC42MDA3OSAtMi41OTE1MywwLjYwMDc5eiIgZmlsbD0iI2ZmOGMxYSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz48L2c+PC9nPjwvc3ZnPjwhLS1yb3RhdGlvbkNlbnRlcjozMi4wNTAwMDAwMDAwMDAwMTozMC40NDk5NTQ5OTk5OTk5OS0tPg=="
    const controlsvg = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NC4xIiBoZWlnaHQ9IjY0LjI0MDgiIHZpZXdCb3g9IjAsMCw2NC4xLDY0LjI0MDgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDcuOTUsLTE0OS41NTAwMykiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMjA3Ljk1LDIxMy42NTAwNHYtNjQuMWg2NC4xdjY0LjF6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjEyLjU4MTgxLDE1OC45ODQ3NmMwLC0yLjIwOTE0IDEuNzkwODYsLTQgNCwtNGg0Ni44MzYzOWMyLjIwOTE0LDAgNCwxLjc5MDg2IDQsNHY0MS41NTYwOGMwLDIuMjA5MTQgLTEuNzkwODYsNCAtNCw0aC01LjI1Njk3Yy0yLDAgLTMsMSAtNCwybC00LDRjLTEsMSAtMiwyIC00LDJoLTEyYy0yLDAgLTMsLTEgLTQsLTJsLTQsLTRjLTEsLTEgLTIsLTIgLTQsLTJoLTUuNTc5NDJjLTIuMjA5MTQsMCAtNCwtMS43OTA4NiAtNCwtNHoiIGZpbGw9IiNjZjhiMTciIHN0cm9rZT0iI2NmOGIxNyIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTIxMi41ODE4MSwxNTUuMjIxOThjMCwtMi4yMDkxNCAxLjc5MDg2LC00IDQsLTRoNDYuODM2MzljMi4yMDkxNCwwIDQsMS43OTA4NiA0LDR2NDEuNTU2MDhjMCwyLjIwOTE0IC0xLjc5MDg2LDQgLTQsNGgtNS4yNTY5N2MtMiwwIC0zLDEgLTQsMmwtNCw0Yy0xLDEgLTIsMiAtNCwyaC0xMmMtMiwwIC0zLC0xIC00LC0ybC00LC00Yy0xLC0xIC0yLC0yIC00LC0yaC01LjU3OTQyYy0yLjIwOTE0LDAgLTQsLTEuNzkwODYgLTQsLTR6IiBmaWxsPSIjZmZhYjE5IiBzdHJva2U9IiNmZmNkNzUiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMjQuMTQxOTUsMTY1LjM3MDg4YzAsLTEuMzc2NTcgMS4wMDc5LC0yLjQ5MjUgMi4yNTEyMSwtMi40OTI1aDI2LjM1OTY3YzEuMjQzMzEsMCAyLjI1MTIyLDEuMTE1OTMgMi4yNTEyMiwyLjQ5MjV2MjUuODk0NjRjMCwxLjM3NjU3IC0xLjAwNzksMi40OTI0OSAtMi4yNTEyMiwyLjQ5MjQ5aC0yNi4zNTk2N2MtMS4yNDMzMSwwIC0yLjI1MTIxLC0xLjExNTkzIC0yLjI1MTIxLC0yLjQ5MjQ5eiIgZmlsbD0iIzVhM2MwOSIgc3Ryb2tlPSIjNWEzYzA5IiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjMxLjUxNjYsMTcxLjg0NTM0aC0xMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiM1YTNjMDkiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTIyMC4xOTk5LDE4NC43OTExaDExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzVhM2MwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjU5LjExMDAxLDE3MS44NDUzNGgtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNWEzYzA5IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNTkuMTEwMDEsMTg0Ljc5MTFoLTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzVhM2MwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjMzLjE4MjA2LDE5Ny43NzMyNnYtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNWEzYzA5IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNDYuMTI3ODcsMTg2LjQ1NjU1djExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzVhM2MwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjMzLjE4MjA2LDE3MC4xNzk4N3YtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNWEzYzA5IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNDYuMTI3ODcsMTU4Ljg2MzE3djExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzVhM2MwOSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjI5LjkwMDY1LDE4NC44NTE2MWMtMS4yMTQ2MiwwIC0yLjI0NzMsLTAuMjYwOTUgLTMuMDk4MDUsLTAuNzgyODVjLTAuODQ4MTMsLTAuNTI0OTMgLTEuNDkzNCwtMS4yNTkyNCAtMS45MzU3OSwtMi4yMDI5MWMtMC40NDIzOSwtMC45NDM2NyAtMC42NjM1OCwtMi4wNDUxMyAtMC42NjM1OCwtMy4zMDQzNmMwLC0wLjk4MDA4IDAuMTMyMTksLTEuODYzMDcgMC4zOTY1OCwtMi42NDg5NWMwLjI2NzAxLC0wLjc4NTg4IDAuNjUxODEsLTEuNDYxMDIgMS4xNTQ0MSwtMi4wMjU0YzAuNTAyNiwtMC41Njc0MSAxLjExNzc2LC0wLjk5ODI5IDEuODQ1NDgsLTEuMjkyNjFjMC43MzAzNCwtMC4yOTczNiAxLjU1NzUzLC0wLjQ0NjA0IDIuNDgxNTgsLTAuNDQ2MDRjMC41MDI2LDAgMS4wMTU2NywwLjA1NjE0IDEuNTM5MjEsMC4xNjg0YzAuNTIzNTQsMC4xMDkyMyAxLjAzNjYxLDAuMzE0MDUgMS41MzkyMSwwLjYxNDQ1YzAuMjU5MTUsMC4xMzk1OCAwLjQzNTg1LDAuMzM1MjkgMC41MzAwOSwwLjU4NzE0YzAuMDk2ODYsMC4yNTE4NSAwLjEyODI3LDAuNTE0MzEgMC4wOTQyNCwwLjc4NzRjLTAuMDM0MDMsMC4yNzMwOSAtMC4xMTkxMSwwLjUyMzQyIC0wLjI1NTIyLDAuNzUwOTljLTAuMTM2MTIsMC4yMjc1NyAtMC4zMjA2NywwLjM3OTI5IC0wLjU1MzY0LDAuNDU1MTRjLTAuMjMwMzYsMC4wNzU4NiAtMC40OTA4MiwwLjAzNzkzIC0wLjc4MTM4LC0wLjExMzc5Yy0wLjMwMTAzLC0wLjE2Mzg1IC0wLjYyODI1LC0wLjI4OTc3IC0wLjk4MTY0LC0wLjM3Nzc3Yy0wLjM1MDc3LC0wLjA4OCAtMC43MjI0OSwtMC4xMzE5OSAtMS4xMTUxNCwtMC4xMzE5OWMtMC42NzI3NSwwIC0xLjIzMjkzLDAuMTQxMDkgLTEuNjgwNTYsMC40MjMyOGMtMC40NDc2MywwLjI3OTE2IC0wLjc4MjY5LDAuNjkzMzQgLTEuMDA1MiwxLjI0MjU1Yy0wLjIxOTg5LDAuNTQ2MTcgLTAuMzI5ODMsMS4yMTUyNCAtMC4zMjk4MywyLjAwNzJjMCwxLjE4OTQ1IDAuMjUxMywyLjA4NzYxIDAuNzUzOSwyLjY5NDQ3YzAuNTAyNiwwLjYwMzgyIDEuMjQ2MDMsMC45MDU3NCAyLjIzMDI4LDAuOTA1NzRjMC4zMDM2NSwwIDAuNjMzNDgsLTAuMDM0ODkgMC45ODk0OSwtMC4xMDQ2OGMwLjM1NjAxLC0wLjA2OTc5IDAuNzE0NjMsLTAuMTY4NCAxLjA3NTg4LC0wLjI5NTg0bC0wLjUxMDQ1LDEuMjA2MTR2LTIuOTkwMzFoLTEuMDU2MjRjLTAuMzQwMywwIC0wLjYwNDY5LC0wLjA5ODYxIC0wLjc5MzE2LC0wLjI5NTg0Yy0wLjE4NTg2LC0wLjIwMDI2IC0wLjI3ODc4LC0wLjQ4MDk0IC0wLjI3ODc4LC0wLjg0MjAyYzAsLTAuMzYxMDggMC4wOTI5MywtMC42MzcyIDAuMjc4NzgsLTAuODI4MzZjMC4xODg0NywtMC4xOTExNiAwLjQ1Mjg2LC0wLjI4Njc0IDAuNzkzMTYsLTAuMjg2NzRoMi4yMzAyOGMwLjM1MzM5LDAgMC42MjMwMSwwLjEwNzcyIDAuODA4ODcsMC4zMjMxNWMwLjE4NTg2LDAuMjE1NDQgMC4yNzg3OCwwLjUyNjQ1IDAuMjc4NzgsMC45MzMwNXYzLjg2NDE5YzAsMC4zNDg5NCAtMC4wNjI4MiwwLjY0NjMxIC0wLjE4ODQ3LDAuODkyMDhjLTAuMTI1NjUsMC4yNDI3NCAtMC4zMjQ1OSwwLjQxNzIyIC0wLjU5Njg0LDAuNTIzNDJjLTAuNDcxMTgsMC4xODUwOSAtMC45ODQyNiwwLjMyOTIyIC0xLjUzOTIxLDAuNDMyMzljLTAuNTUyMzQsMC4xMDYyIC0xLjEwNDY3LDAuMTU5MyAtMS42NTcsMC4xNTkzek0yMzYuNTExNjEsMTg0LjgxOTczYy0wLjQ0MjM5LDAgLTAuNzg0LC0wLjE0MjYxIC0xLjAyNDgzLC0wLjQyNzg0Yy0wLjI0MDgzLC0wLjI4ODI2IC0wLjM2MTI0LC0wLjY4ODc5IC0wLjM2MTI0LC0xLjIwMTU4di05LjIyNTgyYzAsLTAuNTI0OTMgMC4xMjMwMywtMC45MjY5OCAwLjM2OTEsLTEuMjA2MTRjMC4yNDYwNiwtMC4yNzkxNiAwLjU5MDI5LC0wLjQxODczIDEuMDMyNjgsLTAuNDE4NzNoMy43MTA1OWMxLjIwNDE0LDAgMi4xMzQ3MywwLjM1ODA1IDIuNzkxNzgsMS4wNzQxNGMwLjY1OTY2LDAuNzE2MSAwLjk4OTQ5LDEuNzAzNzYgMC45ODk0OSwyLjk2M2MwLDEuMjU5MjQgLTAuMzI5ODMsMi4yNDY5MSAtMC45ODk0OSwyLjk2M2MtMC42NTcwNCwwLjcxNjEgLTEuNTg3NjMsMS4wNzQxNCAtMi43OTE3OCwxLjA3NDE0aC0yLjM0MDIydjIuNzc2MzljMCwwLjUxMjggLTAuMTE1MTgsMC45MTMzMiAtMC4zNDU1NCwxLjIwMTU4Yy0wLjIzMDM2LDAuMjg1MjIgLTAuNTc3MiwwLjQyNzg0IC0xLjA0MDUzLDAuNDI3ODR6TTIzNy44OTc2OCwxNzcuOTQ3MDZoMS44NTcyNmMwLjUyMDkyLDAgMC45MjE0MywtMC4xMzA0NyAxLjIwMTUyLC0wLjM5MTQyYzAuMjgyNzEsLTAuMjYwOTUgMC40MjQwNywtMC42NTM4OSAwLjQyNDA3LC0xLjE3ODgzYzAsLTAuNTM3MDcgLTAuMTQxMzUsLTAuOTMzMDUgLTAuNDI0MDcsLTEuMTg3OTNjLTAuMjgwMDksLTAuMjU3OTEgLTAuNjgwNiwtMC4zODY4NyAtMS4yMDE1MiwtMC4zODY4N2gtMS44NTcyNnpNMjQ5LjQxMDM5LDE4NC44NTE2MWMtMC43NzQ4NCwwIC0xLjQ1OTM3LC0wLjExMzc5IC0yLjA1MzU5LC0wLjM0MTM2Yy0wLjU5MTYsLTAuMjI3NTcgLTEuMDkxNTgsLTAuNTY3NDEgLTEuNDk5OTQsLTEuMDE5NTNjLTAuNDA1NzUsLTAuNDU1MTQgLTAuNzEyMDEsLTEuMDIyNTYgLTAuOTE4ODEsLTEuNzAyMjVjLTAuMjA0MTgsLTAuNjgyNzIgLTAuMzA2MjcsLTEuNDczMTYgLTAuMzA2MjcsLTIuMzcxMzF2LTUuNjExOTZjMCwtMC41MzQwNCAwLjEyMDQyLC0wLjkzNzYgMC4zNjEyNCwtMS4yMTA2OWMwLjI0MDgzLC0wLjI3NjEyIDAuNTgyNDQsLTAuNDE0MTggMS4wMjQ4MywtMC40MTQxOGMwLjQ1Mjg2LDAgMC43OTcwOSwwLjEzODA2IDEuMDMyNjgsMC40MTQxOGMwLjIzNTU5LDAuMjczMDkgMC4zNTMzOSwwLjY3NjY1IDAuMzUzMzksMS4yMTA2OXY1LjY0ODM3YzAsMC44OTUxMiAwLjE3MDE1LDEuNTcwMjUgMC41MTA0NSwyLjAyNTRjMC4zNDI5MiwwLjQ1NTE0IDAuODQxNTksMC42ODI3MiAxLjQ5NjAyLDAuNjgyNzJjMC42NDM5NiwwIDEuMTM2MDgsLTAuMjI3NTcgMS40NzYzOCwtMC42ODI3MmMwLjM0MjkyLC0wLjQ1NTE0IDAuNTE0MzgsLTEuMTMwMjggMC41MTQzOCwtMi4wMjU0di01LjY0ODM3YzAsLTAuNTM0MDQgMC4xMTc3OSwtMC45Mzc2IDAuMzUzMzksLTEuMjEwNjljMC4yMzU1OSwtMC4yNzYxMiAwLjU3NDU5LC0wLjQxNDE4IDEuMDE2OTgsLTAuNDE0MThjMC40NDIzOSwwIDAuNzc4NzYsMC4xMzgwNiAxLjAwOTEyLDAuNDE0MThjMC4yMzI5NywwLjI3MzA5IDAuMzQ5NDYsMC42NzY2NSAwLjM0OTQ2LDEuMjEwNjl2NS42MTE5NmMwLDEuMjAxNTggLTAuMTc5MzEsMi4yMDc0NiAtMC41Mzc5NCwzLjAxNzYyYy0wLjM1NjAxLDAuODA3MTIgLTAuODg2MDksMS40MTI0NyAtMS41OTAyNSwxLjgxNjAzYy0wLjcwMTU0LDAuNDAwNTMgLTEuNTY1MzgsMC42MDA3OSAtMi41OTE1MywwLjYwMDc5eiIgZmlsbD0iI2ZmYWIxOSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz48L2c+PC9nPjwvc3ZnPjwhLS1yb3RhdGlvbkNlbnRlcjozMi4wNTAwMDAwMDAwMDAwMTozMC40NDk5NjQ5OTk5OTk5OS0tPg=="
    const svgString = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NC4xIiBoZWlnaHQ9IjY0LjI0MDc5IiB2aWV3Qm94PSIwLDAsNjQuMSw2NC4yNDA3OSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIwNy45NSwtMTQ5LjU1KSI+PGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMTIuNTgxODEsMTU4Ljk4NDcyYzAsLTIuMjA5MTQgMS43OTA4NiwtNCA0LC00aDQ2LjgzNjM5YzIuMjA5MTQsMCA0LDEuNzkwODYgNCw0djQxLjU1NjA4YzAsMi4yMDkxNCAtMS43OTA4Niw0IC00LDRoLTUuMjU2OTdjLTIsMCAtMywxIC00LDJsLTQsNGMtMSwxIC0yLDIgLTQsMmgtMTJjLTIsMCAtMywtMSAtNCwtMmwtNCwtNGMtMSwtMSAtMiwtMiAtNCwtMmgtNS41Nzk0MmMtMi4yMDkxNCwwIC00LC0xLjc5MDg2IC00LC00eiIgZmlsbD0iIzBiOGU2OSIgc3Ryb2tlPSIjMGI4ZTY5IiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjEyLjU4MTgxLDE1NS4yMjE5N2MwLC0yLjIwOTE0IDEuNzkwODYsLTQgNCwtNGg0Ni44MzYzOWMyLjIwOTE0LDAgNCwxLjc5MDg2IDQsNHY0MS41NTYwOGMwLDIuMjA5MTQgLTEuNzkwODYsNCAtNCw0aC01LjI1Njk3Yy0yLDAgLTMsMSAtNCwybC00LDRjLTEsMSAtMiwyIC00LDJoLTEyYy0yLDAgLTMsLTEgLTQsLTJsLTQsLTRjLTEsLTEgLTIsLTIgLTQsLTJoLTUuNTc5NDJjLTIuMjA5MTQsMCAtNCwtMS43OTA4NiAtNCwtNHoiIGZpbGw9IiMwZmJkOGMiIHN0cm9rZT0iIzNjZjFiZCIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8+PHBhdGggZD0iTTIyNC4xNDE5NSwxNjUuMzcwODdjMCwtMS4zNzY1NyAxLjAwNzksLTIuNDkyNSAyLjI1MTIxLC0yLjQ5MjVoMjYuMzU5NjdjMS4yNDMzMSwwIDIuMjUxMjIsMS4xMTU5MyAyLjI1MTIyLDIuNDkyNXYyNS44OTQ2NGMwLDEuMzc2NTcgLTEuMDA3OSwyLjQ5MjQ5IC0yLjI1MTIyLDIuNDkyNDloLTI2LjM1OTY3Yy0xLjI0MzMxLDAgLTIuMjUxMjEsLTEuMTE1OTMgLTIuMjUxMjEsLTIuNDkyNDl6IiBmaWxsPSIjMDY0ODM1IiBzdHJva2U9IiMwNjQ4MzUiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjxwYXRoIGQ9Ik0yMzEuNTE2NiwxNzEuODQ1MjloLTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzA2NDgzNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjIwLjE5OTksMTg0Ljc5MTA5aDExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzA2NDgzNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjQ3Ljc5MzMxLDE3MS44NDUyOWgxMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiMwNjQ4MzUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTI1OS4xMTAwMSwxODQuNzkxMDloLTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzA2NDgzNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjMzLjE4MjA2LDE5Ny43NzMyNHYtMTEuMzE2NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDY0ODM1IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yNDYuMTI3ODcsMTg2LjQ1NjU0djExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzA2NDgzNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjMzLjE4MjA2LDE1OC44NjMxM3YxMS4zMTY3IiBmaWxsPSJub25lIiBzdHJva2U9IiMwNjQ4MzUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTI0Ni4xMjc4NywxNzAuMTc5ODN2LTExLjMxNjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzA2NDgzNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMjI5LjkwMDY1LDE4NC44NTE1NmMtMS4yMTQ2MiwwIC0yLjI0NzMsLTAuMjYwOTUgLTMuMDk4MDUsLTAuNzgyODVjLTAuODQ4MTMsLTAuNTI0OTMgLTEuNDkzNCwtMS4yNTkyNCAtMS45MzU3OSwtMi4yMDI5MWMtMC40NDIzOSwtMC45NDM2NyAtMC42NjM1OCwtMi4wNDUxMyAtMC42NjM1OCwtMy4zMDQzNmMwLC0wLjk4MDA4IDAuMTMyMTksLTEuODYzMDcgMC4zOTY1OCwtMi42NDg5NWMwLjI2NzAxLC0wLjc4NTg4IDAuNjUxODEsLTEuNDYxMDIgMS4xNTQ0MSwtMi4wMjU0YzAuNTAyNiwtMC41Njc0MSAxLjExNzc2LC0wLjk5ODI5IDEuODQ1NDgsLTEuMjkyNjFjMC43MzAzNCwtMC4yOTczNiAxLjU1NzUzLC0wLjQ0NjA0IDIuNDgxNTgsLTAuNDQ2MDRjMC41MDI2LDAgMS4wMTU2NywwLjA1NjE0IDEuNTM5MjEsMC4xNjg0YzAuNTIzNTQsMC4xMDkyMyAxLjAzNjYxLDAuMzE0MDUgMS41MzkyMSwwLjYxNDQ1YzAuMjU5MTUsMC4xMzk1OCAwLjQzNTg1LDAuMzM1MjkgMC41MzAwOSwwLjU4NzE0YzAuMDk2ODYsMC4yNTE4NSAwLjEyODI3LDAuNTE0MzEgMC4wOTQyNCwwLjc4NzRjLTAuMDM0MDMsMC4yNzMwOSAtMC4xMTkxMSwwLjUyMzQyIC0wLjI1NTIyLDAuNzUwOTljLTAuMTM2MTIsMC4yMjc1NyAtMC4zMjA2NywwLjM3OTI5IC0wLjU1MzY0LDAuNDU1MTRjLTAuMjMwMzYsMC4wNzU4NiAtMC40OTA4MiwwLjAzNzkzIC0wLjc4MTM4LC0wLjExMzc5Yy0wLjMwMTAzLC0wLjE2Mzg1IC0wLjYyODI1LC0wLjI4OTc3IC0wLjk4MTY0LC0wLjM3Nzc3Yy0wLjM1MDc3LC0wLjA4OCAtMC43MjI0OSwtMC4xMzE5OSAtMS4xMTUxNCwtMC4xMzE5OWMtMC42NzI3NSwwIC0xLjIzMjkzLDAuMTQxMDkgLTEuNjgwNTYsMC40MjMyOGMtMC40NDc2MywwLjI3OTE2IC0wLjc4MjY5LDAuNjkzMzQgLTEuMDA1MiwxLjI0MjU1Yy0wLjIxOTg5LDAuNTQ2MTcgLTAuMzI5ODMsMS4yMTUyNCAtMC4zMjk4MywyLjAwNzJjMCwxLjE4OTQ1IDAuMjUxMywyLjA4NzYxIDAuNzUzOSwyLjY5NDQ3YzAuNTAyNiwwLjYwMzgyIDEuMjQ2MDMsMC45MDU3NCAyLjIzMDI4LDAuOTA1NzRjMC4zMDM2NSwwIDAuNjMzNDgsLTAuMDM0ODkgMC45ODk0OSwtMC4xMDQ2OGMwLjM1NjAxLC0wLjA2OTc5IDAuNzE0NjMsLTAuMTY4NCAxLjA3NTg4LC0wLjI5NTg0bC0wLjUxMDQ1LDEuMjA2MTR2LTIuOTkwMzFoLTEuMDU2MjRjLTAuMzQwMywwIC0wLjYwNDY5LC0wLjA5ODYxIC0wLjc5MzE2LC0wLjI5NTg0Yy0wLjE4NTg2LC0wLjIwMDI2IC0wLjI3ODc4LC0wLjQ4MDk0IC0wLjI3ODc4LC0wLjg0MjAyYzAsLTAuMzYxMDggMC4wOTI5MywtMC42MzcyIDAuMjc4NzgsLTAuODI4MzZjMC4xODg0NywtMC4xOTExNiAwLjQ1Mjg2LC0wLjI4Njc0IDAuNzkzMTYsLTAuMjg2NzRoMi4yMzAyOGMwLjM1MzM5LDAgMC42MjMwMSwwLjEwNzcyIDAuODA4ODcsMC4zMjMxNWMwLjE4NTg2LDAuMjE1NDQgMC4yNzg3OCwwLjUyNjQ1IDAuMjc4NzgsMC45MzMwNXYzLjg2NDE5YzAsMC4zNDg5NCAtMC4wNjI4MiwwLjY0NjMxIC0wLjE4ODQ3LDAuODkyMDhjLTAuMTI1NjUsMC4yNDI3NCAtMC4zMjQ1OSwwLjQxNzIyIC0wLjU5Njg0LDAuNTIzNDJjLTAuNDcxMTgsMC4xODUwOSAtMC45ODQyNiwwLjMyOTIyIC0xLjUzOTIxLDAuNDMyMzljLTAuNTUyMzQsMC4xMDYyIC0xLjEwNDY3LDAuMTU5MyAtMS42NTcsMC4xNTkzek0yMzYuNTExNjEsMTg0LjgxOTdjLTAuNDQyMzksMCAtMC43ODQsLTAuMTQyNjEgLTEuMDI0ODMsLTAuNDI3ODRjLTAuMjQwODMsLTAuMjg4MjYgLTAuMzYxMjQsLTAuNjg4NzkgLTAuMzYxMjQsLTEuMjAxNTh2LTkuMjI1ODJjMCwtMC41MjQ5MyAwLjEyMzAzLC0wLjkyNjk4IDAuMzY5MSwtMS4yMDYxNGMwLjI0NjA2LC0wLjI3OTE2IDAuNTkwMjksLTAuNDE4NzMgMS4wMzI2OCwtMC40MTg3M2gzLjcxMDU5YzEuMjA0MTQsMCAyLjEzNDczLDAuMzU4MDUgMi43OTE3OCwxLjA3NDE0YzAuNjU5NjYsMC43MTYxIDAuOTg5NDksMS43MDM3NiAwLjk4OTQ5LDIuOTYzYzAsMS4yNTkyNCAtMC4zMjk4MywyLjI0NjkxIC0wLjk4OTQ5LDIuOTYzYy0wLjY1NzA0LDAuNzE2MSAtMS41ODc2MywxLjA3NDE0IC0yLjc5MTc4LDEuMDc0MTRoLTIuMzQwMjJ2Mi43NzYzOWMwLDAuNTEyOCAtMC4xMTUxOCwwLjkxMzMyIC0wLjM0NTU0LDEuMjAxNThjLTAuMjMwMzYsMC4yODUyMiAtMC41NzcyLDAuNDI3ODQgLTEuMDQwNTMsMC40Mjc4NHpNMjM3Ljg5NzY4LDE3Ny45NDY5OWgxLjg1NzI2YzAuNTIwOTIsMCAwLjkyMTQzLC0wLjEzMDQ3IDEuMjAxNTIsLTAuMzkxNDJjMC4yODI3MSwtMC4yNjA5NSAwLjQyNDA3LC0wLjY1Mzg5IDAuNDI0MDcsLTEuMTc4ODNjMCwtMC41MzcwNyAtMC4xNDEzNSwtMC45MzMwNSAtMC40MjQwNywtMS4xODc5M2MtMC4yODAwOSwtMC4yNTc5MSAtMC42ODA2LC0wLjM4Njg3IC0xLjIwMTUyLC0wLjM4Njg3aC0xLjg1NzI2ek0yNDkuNDEwMzksMTg0Ljg1MTU2Yy0wLjc3NDg0LDAgLTEuNDU5MzcsLTAuMTEzNzkgLTIuMDUzNTksLTAuMzQxMzZjLTAuNTkxNiwtMC4yMjc1NyAtMS4wOTE1OCwtMC41Njc0MSAtMS40OTk5NCwtMS4wMTk1M2MtMC40MDU3NSwtMC40NTUxNCAtMC43MTIwMSwtMS4wMjI1NiAtMC45MTg4MSwtMS43MDIyNWMtMC4yMDQxOCwtMC42ODI3MiAtMC4zMDYyNywtMS40NzMxNiAtMC4zMDYyNywtMi4zNzEzMXYtNS42MTE5NmMwLC0wLjUzNDA0IDAuMTIwNDIsLTAuOTM3NiAwLjM2MTI0LC0xLjIxMDY5YzAuMjQwODMsLTAuMjc2MTIgMC41ODI0NCwtMC40MTQxOCAxLjAyNDgzLC0wLjQxNDE4YzAuNDUyODYsMCAwLjc5NzA5LDAuMTM4MDYgMS4wMzI2OCwwLjQxNDE4YzAuMjM1NTksMC4yNzMwOSAwLjM1MzM5LDAuNjc2NjUgMC4zNTMzOSwxLjIxMDY5djUuNjQ4MzdjMCwwLjg5NTEyIDAuMTcwMTUsMS41NzAyNSAwLjUxMDQ1LDIuMDI1NGMwLjM0MjkyLDAuNDU1MTQgMC44NDE1OSwwLjY4MjcyIDEuNDk2MDIsMC42ODI3MmMwLjY0Mzk2LDAgMS4xMzYwOCwtMC4yMjc1NyAxLjQ3NjM4LC0wLjY4MjcyYzAuMzQyOTIsLTAuNDU1MTQgMC41MTQzOCwtMS4xMzAyOCAwLjUxNDM4LC0yLjAyNTR2LTUuNjQ4MzdjMCwtMC41MzQwNCAwLjExNzc5LC0wLjkzNzYgMC4zNTMzOSwtMS4yMTA2OWMwLjIzNTU5LC0wLjI3NjEyIDAuNTc0NTksLTAuNDE0MTggMS4wMTY5OCwtMC40MTQxOGMwLjQ0MjM5LDAgMC43Nzg3NiwwLjEzODA2IDEuMDA5MTIsMC40MTQxOGMwLjIzMjk3LDAuMjczMDkgMC4zNDk0NiwwLjY3NjY1IDAuMzQ5NDYsMS4yMTA2OXY1LjYxMTk2YzAsMS4yMDE1OCAtMC4xNzkzMSwyLjIwNzQ2IC0wLjUzNzk0LDMuMDE3NjJjLTAuMzU2MDEsMC44MDcxMiAtMC44ODYwOSwxLjQxMjQ3IC0xLjU5MDI1LDEuODE2MDNjLTAuNzAxNTQsMC40MDA1MyAtMS41NjUzOCwwLjYwMDc5IC0yLjU5MTUzLDAuNjAwNzl6IiBmaWxsPSIjMGZiZDhjIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjxwYXRoIGQ9Ik0yMDcuOTUsMjEzLjY1di02NC4xaDY0LjF2NjQuMXoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbGluZWNhcD0iYnV0dCIvPjwvZz48L2c+PC9zdmc+PCEtLXJvdGF0aW9uQ2VudGVyOjMyLjA1MDAwMDAwMDAwMDAxOjMwLjQ0OTk5OTk5OTk5OTk5LS0+";
    class GPUvars {
        getInfo() {
            return {
                id: 'polypenguingpublocksvariables',
                name: 'GPU Variables',
                blockIconURI: svgString,
                menuIconURI: varsvg,
                blocks: [
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'newvar',
                        text: "new variable [NAME] with value [VALUE]",
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "my variable"
                            },
                            VALUE: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "0"
                            },
                        },
                        extensions: ["colours_data"],
                    },
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'setvar',
                        text: "set variable [NAME] to value [VALUE]",
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "my variable"
                            },
                            VALUE: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "0"
                            },
                        },
                        extensions: ["colours_data"],
                    },
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'changevar',
                        text: "change variable [NAME] by [VALUE]",
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "my variable"
                            },
                            VALUE: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "1"
                            },
                        },
                        extensions: ["colours_data"],
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'getvar',
                        text: "get variable [NAME]",
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: "my variable"
                            },
                        },
                        extensions: ["colours_data"],
                    }
                ]
            }
        }
        getname() {
            const letters = ['a', 'b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
            let str = ""
            for (let i =0; i<5; i++) {
                if (Math.floor(Math.random()*2)>0) {
                    str+=(letters[Math.floor(Math.random()*26)].toUpperCase())
                } else {
                    str+=(letters[Math.floor(Math.random()*26)])
                }
            }
            for (const [key, value] of Object.entries(vars)) {
                if (value === "ur"+str) {
                    str = this.getname()
                    break
                }
            }
            return str
        }
        newvar(args) {
            const name = "ur"+this.getname()
            vars[args.NAME] = name
            script.push(("   ".repeat(indentlayer))+"var "+name+" = "+ctype+"("+args.VALUE+");\n")
        }
        setvar(args) {
            script.push(("   ".repeat(indentlayer))+vars[args.NAME]+" = "+ctype+"("+args.VALUE+");\n")
        }
        changevar(args) {
            script.push(("   ".repeat(indentlayer))+vars[args.NAME]+" += "+ctype+"("+args.VALUE+");\n")
        }
        getvar(args) {
            return vars[args.NAME]
        }
    }
    class GPUcontrol {
        getInfo() {
            return {
                id: 'polypenguingpublockscontrol',
                name: 'GPU Control',
                blockIconURI: svgString,
                menuIconURI: controlsvg,
                blocks: [
                    {
                        blockType: Scratch.BlockType.LOOP,
                        opcode: 'repeat',
                        text: 'repeat[NUM]',
                        arguments: {
                            NUM: {
                                type: Scratch.ArgumentType.NUMBER,
                                defaultValue: 10
                            },
                        },
                        extensions: ["colours_control"],
                    },
                    {
                        blockType: Scratch.BlockType.LOOP,
                        opcode: 'notwhile',
                        text: 'repeat until[COND]',
                        arguments: {
                            COND: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            },
                        },
                        extensions: ["colours_control"],
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'inde',
                        text: 'repeat index',
                        disableMonitor: true,
                        extensions: ["colours_control"],
                    },
                    "---",
                    {
                        blockType: Scratch.BlockType.LOOP,
                        opcode: 'ifthen',
                        text: 'if[COND]then',
                        arguments: {
                            COND: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            },
                        },
                        extensions: ["colours_control"],
                        branchIconURI: null
                    },
                    {
                        blockType: Scratch.BlockType.LOOP,
                        opcode: 'else',
                        text: 'else',
                        extensions: ["colours_control"],
                        branchIconURI: null
                    },
                    {
                        blockType: Scratch.BlockType.LOOP,
                        opcode: 'elif',
                        text: 'else if[COND]then',
                        arguments: {
                            COND: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            },
                        },
                        extensions: ["colours_control"],
                        branchIconURI: null
                    },
                ]
            }
        }
        inde() {
            return ctype+"(i".repeat(loops)+")"
        }
        repeat(args, util) {
            if (util.stackFrame.done != "yes") {
                loops ++
                util.stackFrame.done = "yes"
                script.push(("   ".repeat(indentlayer))+"for (var "+"i".repeat(loops)+" = 0u; "+"i".repeat(loops)+"< u32("+args.NUM+ "); "+"i".repeat(loops)+"++){\n")
                indentlayer ++
                return true
            } else {
                loops --
                indentlayer --
                script.push(("   ".repeat(indentlayer))+"};\n")
            }
        }
        notwhile(args, util) {
            if (util.stackFrame.done != "yes") {
                loops ++
                util.stackFrame.done = "yes"
                script.push("   ".repeat(indentlayer)+"while (!("+args.COND+")) {\n")
                indentlayer ++
                return true
            } else {
                loops --
                indentlayer --
                script.push(("   ".repeat(indentlayer))+"};\n")
            }
        }
        ifthen(args, util) {
            if (util.stackFrame.done != "yes") {
                util.stackFrame.done = "yes"
                script.push(("   ".repeat(indentlayer))+"if ("+args.COND+ "){\n")
                indentlayer ++
                return true
            } else {
                indentlayer --
                script.push(("   ".repeat(indentlayer))+"};\n")
            }
        }
        else(args, util) {
            if (util.stackFrame.done != "yes") {
                util.stackFrame.done = "yes"
                script[script.length-1]=(("   ".repeat(indentlayer))+"} else {\n")
                indentlayer ++
                return true
            } else {
                indentlayer --
                script.push(("   ".repeat(indentlayer))+"};\n")
            }
        }
        elif(args, util) {
            if (util.stackFrame.done != "yes") {
                util.stackFrame.done = "yes"
                script[script.length-1]=(("   ".repeat(indentlayer))+"} else if ("+args.COND+") {\n")
                indentlayer ++
                return true
            } else {
                indentlayer --
                script.push(("   ".repeat(indentlayer))+"};\n")
            }
        }
    }
    class GPUoperators {
        getInfo() {
            return {
                id: 'polypenguingpublocksoperators',
                name: 'GPU Operators',
                blockIconURI: svgString,
                menuIconURI: operatorsvg,
                blocks: [
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'plus',
                        text: '[A] + [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'minus',
                        text: '[A] - [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'times',
                        text: '[A] * [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'divide',
                        text: '[A] / [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    "---",
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'greater',
                        text: '[A] > [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: '50'
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'less',
                        text: '[A] < [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: '50'
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'equal',
                        text: '[A] = [B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: '50'
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    "---",
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'and',
                        text: '[A]and[B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            },
                            B: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'or',
                        text: '[A]or[B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            },
                            B: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'not',
                        text: 'not[A]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            },
                            B: {
                                type: Scratch.ArgumentType.BOOLEAN,
                                defaultValue: false
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    "---",
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'round',
                        text: 'round[A]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'mod',
                        text: '[A]mod[B]',
                        arguments: {
                            A: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            },
                            B: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    },
                    "---",
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'sqrt',
                        text: '[OF] of [CONTENT]',
                        arguments: {
                            OF: {
                                type: Scratch.ArgumentType.STRING,
                                menu: 'OF_MENU'
                            },
                            CONTENT: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: ''
                            }
                        },
                        extensions: ["colours_operators"],
                    }
                ],
                menus: {
                    OF_MENU: {
                        acceptReporters: false,
                        items: ['abs', 'floor', 'ceiling', 'sqrt', 'sin', 'cos', 'tan', 'asin', 'acos', 'atan', 'ln', 'log', 'e ^', '10 ^']
                    }
                }
            }
        }
        round(args) {
            return ctype+"(round("+args.A+"))"
        }
        mod(args) {
            return "("+args.A+"%"+args.B+")"
        }
        and(args) {
            return "("+args.A+'&&'+args.B+")"
        }
        or(args) {
            return "("+args.A+'||'+args.B+")"
        }
        not(args) {
            return "!("+args.A+")"
        }
        greater(args) {
            return "("+args.A+'>'+args.B+")"
        }
        less(args) {
            return "("+args.A+'<'+args.B+")"
        }
        equal(args) {
            return "("+args.A+'=='+args.B+")"
        }
        plus(args) {
            return "("+args.A+'+'+args.B+")"
        }
        minus(args) {
            return "("+args.A+'-'+args.B+")"
        }
        times(args) {
            return "("+args.A+'*'+args.B+")"
        }
        divide(args) {
            return "("+args.A+'/'+args.B+")"
        }
        sqrt(args) {
            if (args.OF == 'abs') {
                return "abs(" + args.CONTENT + ")"
            } else if (args.OF == 'floor') {
                return "floor(" + args.CONTENT + ")"
            } else if (args.OF == 'ceil') {
                return "ceil(" + args.CONTENT + ")"
            } else if (args.OF == 'sin') {
                return "sin(" + args.CONTENT + ")"
            }  else if (args.OF == 'sqrt') {
                return "sqrt(" + args.CONTENT + ")"
            } else if (args.OF == 'cos') {
                return "cos(" + args.CONTENT + ")"
            } else if (args.OF == 'tan') {
                return "tan(" + args.CONTENT + ")"
            } else if (args.OF == 'asin') {
                return "asin(" + args.CONTENT + ")"
            } else if (args.OF == 'acos') {
                return "acos(" + args.CONTENT + ")"
            } else if (args.OF == 'atan') {
                return "atan(" + args.CONTENT + ")"
            } else if (args.OF == 'ln') {
                return "log(" + args.CONTENT + ")"
            } else if (args.OF == 'log') {
                return "log10(" + args.CONTENT + ")"
            } else if (args.OF == 'e ^') {
                return "pow(2.71828182846, " + args.CONTENT + ")"
            } else if (args.OF == '10 ^') {
                return "pow(10, " + args.CONTENT + ")"
            }
        }
    }
    class GPUblocks {
        constructor() {
            this.scripts = []
            script = []
            this.sn = ""
            this.rn = ""
            Scratch.vm.on("PROJECT_RUN_STOP", () => {
                this._resetAttrs();
            });
            this._resetAttrs();
            this.types = {
                i32: Int32Array,
                f32: Float32Array,
            };
        }
        getInfo() {
            return {
                id: 'polypenguingpublocks',
                name: 'GPU Blocks',
                menuIconURI: svgString,
                blocks: [
                    {
                        blockType: Scratch.BlockType.BOOLEAN,
                        opcode: 'init',
                        text: '🗲 init GPU',
                        disableMonitor: true,
                    },
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'compileGpuScripts',
                        text: '🔄 compile GPU script with name: [NAME] and type: [TYPE]',
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'script'
                            },
                            TYPE: {
                                type: Scratch.ArgumentType.STRING,
                                menu: "TYPES"
                            }
                        },
                        extensions: ["colours_pen"],
                    },
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'run',
                        text: '🗲 run GPU script [NAME] with list [IN] as inputs, and send outputs to list [OUT]',
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'script'
                            },
                            IN: {
                                type: Scratch.ArgumentType.STRING,
                                menu: "LISTS"
                            },
                            OUT: {
                                type: Scratch.ArgumentType.STRING,
                                menu: "LISTS"
                            }
                        },
                        extensions: ["colours_pen"],
                    },
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'runt',
                        text: '🗲 run GPU script [NAME] [X] times, and send outputs to list [OUT]',
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'script'
                            },
                            X: {
                                type: Scratch.ArgumentType.NUMBER,
                                defaultValue: 10
                            },
                            OUT: {
                                type: Scratch.ArgumentType.STRING,
                                menu: "LISTS"
                            }
                        },
                        extensions: ["colours_pen"],
                    },
                    {
                        blockType: Scratch.BlockType.HAT,
                        opcode: 'gpuScript',
                        text: '📜 GPU script with name: [NAME]',
                        arguments: {
                            NAME: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'script'
                            }
                        },
                        extensions: ["colours_pen"],
                    },
                    {
                        blockType: Scratch.BlockType.LOOP,
                        opcode: 'end',
                        isTerminal: true,
                        text: ["GPU code"],
                        extensions: ["colours_pen"],
                        branchIconURI: null,
                    },
                    {
                        blockType: Scratch.BlockType.COMMAND,
                        opcode: 'return',
                        text: 'return [CONTENT]',
                        isTerminal: true,
                        arguments: {
                            CONTENT: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'content'
                            }
                        },
                        extensions: ["colours_pen"],
                        blockIconURI: svgString,
                        
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'value',
                        text: 'value',
                        extensions: ["colours_pen"],
                        disableMonitor: true,
                        blockIconURI: svgString,
                    },
                    {
                        blockType: Scratch.BlockType.REPORTER,
                        opcode: 'index',
                        text: 'index',
                        extensions: ["colours_pen"],
                        disableMonitor: true,
                        blockIconURI: svgString,
                    },
                ],
                menus: {
                    LISTS: {
                        acceptReporters: true,
                        items: "getLists"
                    },
                    TYPES: {
                        acceptReporters: true,
                        items: ["int", "float"]
                    }
                }
            };
        }
        end(args, util) {
            if (util.stackFrame.done != "yes") {
                util.stackFrame.done = 'yes'
                return true
            } else {
                this.sn = ""
            }
        }
        getLists() {
            const names = [];
      
            const globalVars = Object.entries(
              Scratch.vm.runtime.targets[0].variables
            );
            const localVars = Object.entries(Scratch.vm.editingTarget.variables);
            for (const [varId, varObj] of globalVars.concat(localVars)) {
              if (varObj.type === "list")
                names.push({
                  text: varObj.name,
                  value: varId,
                });
            }
      
            return names.length ? names : [""];
        }
        parseIt(it) {
            try {
                return JSON.parse(it)
            } catch {
                return it
            }
        }
        value() {
            return("strg[global_id.x]")
        }
        index() {
            return(ctype+"(global_id.x)")
        }

        gpuScript(args) {
            if (this.rn == args.NAME) {
                this.rn = ""
                return true
            }
            return false
        }
        run(args) {
            this.bindGroupLayouts = [];
            this.pipelineLayouts = [];
            this.buffers = [];
            this.bindGroups = [];
            this.pipelines = [];
            this.commandBuffers = [];
            let scriptr = {}
            for (const i in this.scripts) {
                if (this.scripts[i]["name"] == args.NAME) {
                    scriptr = this.scripts[i]
                }
            }
            this.newBindGroupLayout()
            this.addEntryToBindGroupLayout({TYPE: "storage"})
            let tmp = this.createBindGroupLayout()
            this.newPipelineLayout()
            this.addBindGroupLayoutToPipelineLayout({BIND_GROUP_LAYOUT: tmp})
            tmp = this.createPipelineLayout()
            let sbuff = this.createBuffer({SIZE:this._getList(args.IN).length * 4, USAGE:140})
            this.newBindGroup({LAYOUT: tmp})
            this.addBufferToBindGroup({BUFFER: sbuff})
            let tmp2 = this.createBindGroup()
            let tmp3 = this.createComputePipeline({LAYOUT:tmp, MODULE_NAME:args.NAME})
            let obuff = this.createBuffer({SIZE:this._getList(args.IN).length * 4, USAGE:9})
            this.newCommandBuffer()
            this.beginComputePass({PIPELINE: tmp3})
            this.setComputePassBindGroup({BIND_GROUP_IDX: tmp2, BIND_GROUP: tmp2})
            this.dispatchComputePass({X:25000, Y:1, Z:1})
            this.copyBufferToBuffer({SRC:sbuff, DST:obuff})
            tmp = this.createCommandBuffer()
            this.newQueue()
            this.writeListToBuffer({LIST_ID: args.IN, TYPE: scriptr["type"], BUFFER: sbuff})
            this.addCommandBufferToQueue({COMMAND_BUFFER: tmp})
            this.submitQueue()
            this.readBufferToList({BUFFER:obuff, LIST_ID: args.OUT, TYPE: scriptr["type"]})
        }
        runt(args) {
            this.bindGroupLayouts = [];
            this.pipelineLayouts = [];
            this.buffers = [];
            this.bindGroups = [];
            this.pipelines = [];
            this.commandBuffers = [];
            let scriptr = {}
            for (const i in this.scripts) {
                if (this.scripts[i]["name"] == args.NAME) {
                    scriptr = this.scripts[i]
                }
            }
            this.newBindGroupLayout()
            this.addEntryToBindGroupLayout({TYPE: "storage"})
            let tmp = this.createBindGroupLayout()
            this.newPipelineLayout()
            this.addBindGroupLayoutToPipelineLayout({BIND_GROUP_LAYOUT: tmp})
            tmp = this.createPipelineLayout()
            let sbuff = this.createBuffer({SIZE:args.X * 4, USAGE:140})
            this.newBindGroup({LAYOUT: tmp})
            this.addBufferToBindGroup({BUFFER: sbuff})
            let tmp2 = this.createBindGroup()
            let tmp3 = this.createComputePipeline({LAYOUT:tmp, MODULE_NAME:args.NAME})
            let obuff = this.createBuffer({SIZE:args.X * 4, USAGE:9})
            this.newCommandBuffer()
            this.beginComputePass({PIPELINE: tmp3})
            this.setComputePassBindGroup({BIND_GROUP_IDX: tmp2, BIND_GROUP: tmp2})
            this.dispatchComputePass({X:25000, Y:1, Z:1})
            this.copyBufferToBuffer({SRC:sbuff, DST:obuff})
            tmp = this.createCommandBuffer()
            this.newQueue()
            this.writeListToBuffer({LIST_ID: "NULL_LIST", TYPE: scriptr["type"], BUFFER: sbuff})
            this.addCommandBufferToQueue({COMMAND_BUFFER: tmp})
            this.submitQueue()
            this.readBufferToList({BUFFER:obuff, LIST_ID: args.OUT, TYPE: scriptr["type"]})
        }
        return(args) {
            script.push(("   ".repeat(indentlayer))+"strg[global_id.x] = "+args.CONTENT+ ";\n")
        }
        compileGpuScripts(args) {
            const name = args.NAME
            if (args.TYPE == "int") {
                ctype = "i32"
            } else {
                ctype = "f32"
            }
            this.rn = name
            this.sn = name
            return new Promise((resolve, reject) => {
                const intervalId = setInterval(() => {
                    if (this.sn != name) {
                        clearInterval(intervalId);
                        let code = ""
                        for (let i = 0; i < script.length; i++) {
                            code += script[i];
                        }
                        let txt = "@group(0) @binding(0)\nvar<storage, read_write> strg: array<"+ctype+">;\n\n@compute @workgroup_size(256)\nfn main(\n    @builtin(global_invocation_id)\n    global_id: vec3u\n) {\n" + code + '}'
                        console.log(txt)
                        this.scripts.push({name: name, code: txt, type: ctype})
                        ctype=""
                        script = []
                        this.sn = ""
                        vars = {}
                        resolve();
                    }
                }, 1);
            });
        }
        
    init() {
        this._resetAttrs();
  
        if (!navigator.gpu) return false;
  
        return navigator.gpu.requestAdapter().then(async (adapter) => {
          this.dev = await adapter.requestDevice();
          this._createModules();
          return true;
        });
      }
      _createModules() {
        for (const commentName in this.scripts) {
            const name = this.scripts[commentName]["name"]
            const code = this.scripts[commentName]["code"]
            
            this.modules[name] = this.dev.createShaderModule({
              code: code,
            });
          }
        }
  
      // bind group layouts
      newBindGroupLayout() {
        this.tmp = {
          entries: [],
        };
      }
      addEntryToBindGroupLayout({ TYPE }) {
        this.tmp.entries.push({
          binding: this.tmp.entries.length,
          visibility: GPUShaderStage.COMPUTE,
          buffer: {
            type: TYPE,
          },
        });
      }
      createBindGroupLayout() {
        this.bindGroupLayouts.push(this.dev.createBindGroupLayout(this.tmp));
        return this.bindGroupLayouts.length - 1;
      }
  
      // pipeline layouts
      newPipelineLayout() {
        this.tmp = {
          bindGroupLayouts: [],
        };
      }
      addBindGroupLayoutToPipelineLayout({ BIND_GROUP_LAYOUT }) {
        this.tmp.bindGroupLayouts.push(this.bindGroupLayouts[BIND_GROUP_LAYOUT]);
      }
      createPipelineLayout() {
        this.pipelineLayouts.push(this.dev.createPipelineLayout(this.tmp));
        return this.pipelineLayouts.length - 1;
      }
  
      // buffers
      createBuffer({ SIZE, USAGE }) {
        const buf = this.dev.createBuffer({
          size: SIZE,
          usage: USAGE,
        });
        this.buffers.push(buf);
        return this.buffers.length - 1;
      }
      bufferUsage({ USAGE }) {
        switch (USAGE) {
          case "COPY_SRC":
            return GPUBufferUsage.COPY_SRC;
          case "COPY_DST":
            return GPUBufferUsage.COPY_DST;
          case "INDEX":
            return GPUBufferUsage.INDEX;
          case "INDIRECT":
            return GPUBufferUsage.INDIRECT;
          case "MAP_READ":
            return GPUBufferUsage.MAP_READ;
          case "MAP_WRITE":
            return GPUBufferUsage.MAP_WRITE;
          case "QUERY_RESOLVE":
            return GPUBufferUsage.QUERY_RESOLVE;
          case "STORAGE":
            return GPUBufferUsage.STORAGE;
          case "UNIFORM":
            return GPUBufferUsage.UNIFORM;
          case "VERTEX":
            return GPUBufferUsage.VERTEX;
          default:
            return 0;
        }
      }
      readBufferToList({ BUFFER, LIST_ID, TYPE }) {
        const buf = this.buffers[BUFFER];
        return buf.mapAsync(GPUMapMode.READ).then(() => {
          const arrayBuffer = buf.getMappedRange();
          this._setList(LIST_ID, Array.from(new this.types[TYPE](arrayBuffer)));
          buf.unmap();
        });
      }
  
      // bind groups
      newBindGroup({ LAYOUT }) {
        this.tmp = {
          layout: this.bindGroupLayouts[LAYOUT],
          entries: [],
        };
      }
      addBufferToBindGroup({ BUFFER }) {
        this.tmp.entries.push({
          binding: this.tmp.entries.length,
          resource: {
            buffer: this.buffers[BUFFER],
          },
        });
      }
      createBindGroup() {
        this.bindGroups.push(this.dev.createBindGroup(this.tmp));
        return this.bindGroups.length - 1;
      }
  
      // compute pipelines
      createComputePipeline({ LAYOUT, MODULE_NAME }) {
        this.pipelines.push(
          this.dev.createComputePipeline({
            layout: this.pipelineLayouts[LAYOUT],
            compute: {
              module: this.modules[MODULE_NAME],
              entryPoint: "main",
            },
          })
        );
        return this.pipelines.length - 1;
      }
  
      // command buffers
      newCommandBuffer() {
        this.tmp = {};
        this.tmp.commandEncoder = this.dev.createCommandEncoder();
      }
      beginComputePass({ PIPELINE }) {
        this.tmp.computePass = this.tmp.commandEncoder.beginComputePass();
        this.tmp.pipeline = this.pipelines[PIPELINE];
        this.tmp.computePass.setPipeline(this.tmp.pipeline);
      }
      setComputePassBindGroup({ BIND_GROUP_IDX, BIND_GROUP }) {
        const bindGroup = this.bindGroups[BIND_GROUP];
        if (BIND_GROUP === "auto") bindGroup = this.dev.createBindGroup();
        this.tmp.computePass.setBindGroup(
          BIND_GROUP_IDX,
          this.bindGroups[BIND_GROUP]
        );
      }
      dispatchComputePass({ X, Y, Z }) {
        this.tmp.computePass.dispatchWorkgroups(X, Y, Z);
        this.tmp.computePass.end();
      }
      copyBufferToBuffer({ SRC, DST }) {
        const src = this.buffers[SRC];
        this.tmp.commandEncoder.copyBufferToBuffer(
          src,
          0,
          this.buffers[DST],
          0,
          src.size
        );
      }
      createCommandBuffer() {
        this.commandBuffers.push(this.tmp.commandEncoder.finish());
        return this.commandBuffers.length - 1;
      }
  
      // queues
      newQueue() {
        this.tmp = [];
      }
      writeListToBuffer({ LIST_ID, TYPE, BUFFER }) {
        this.dev.queue.writeBuffer(
          this.buffers[BUFFER],
          0,
          this.types[TYPE].from(this._getList(LIST_ID))
        );
      }
      addCommandBufferToQueue({ COMMAND_BUFFER }) {
        this.tmp.push(this.commandBuffers[COMMAND_BUFFER]);
      }
      submitQueue() {
        this.dev.queue.submit(this.tmp);
      }
  
      // helpers
      _resetAttrs() {
        this.dev?.destroy();
        this.dev = undefined;
        for (const b of this.buffers || []) b.destroy();
  
        this.modules = {};
        this.bindGroupLayouts = [];
        this.pipelineLayouts = [];
        this.buffers = [];
        this.bindGroups = [];
        this.pipelines = [];
        this.commandBuffers = [];
  
        this.tmp = undefined;
      }
      _getModuleNames() {
        const names = [];
        for (const commentName in Scratch.vm.editingTarget.comments) {
          const c = Scratch.vm.editingTarget.comments[commentName];
          if (c.text.startsWith("name:")) {
            const firstLineEndIdx = c.text.indexOf("\n");
            names.push(c.text.slice(5, firstLineEndIdx).trim());
          }
        }
        return names.length ? names : [""];
      }
      _getLists() {
        const names = [];
  
        const globalVars = Object.entries(
          Scratch.vm.runtime.targets[0].variables
        );
        const localVars = Object.entries(Scratch.vm.editingTarget.variables);
        for (const [varId, varObj] of globalVars.concat(localVars)) {
          if (varObj.type === "list")
            names.push({
              text: varObj.name,
              value: varId,
            });
        }
  
        return names.length ? names : [""];
      }
      _getList(listId) {
        if (listId === "NULL_LIST") {
            return []
        }
        for (const t of Scratch.vm.runtime.targets) {
          for (const varId in t.variables) {
            const varObj = t.variables[varId];
            if (varId === listId && varObj.type === "list") {
              return varObj.value;
            }
          }
        }
      }
      _setList(listId, val) {
        for (const t of Scratch.vm.runtime.targets) {
          for (const varId in t.variables) {
            const varObj = t.variables[varId];
            if (varId === listId && varObj.type === "list") {
              varObj.value = val;
              return;
            }
          }
        }
      }
    }

    Scratch.extensions.register(new GPUblocks());
    Scratch.extensions.register(new GPUcontrol());
    Scratch.extensions.register(new GPUoperators());
    Scratch.extensions.register(new GPUvars());
})(Scratch);
